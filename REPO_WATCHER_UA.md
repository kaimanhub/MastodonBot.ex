Звичайно! Ось українська версія файлу `REPO_WATCHER_UA.md`:
# Спостерігач Репозиторіїв

**Спостерігач Репозиторіїв** — це функція MastodonBotEx, яка дозволяє користувачам взаємодіяти з ботом для:

- **Спостереження за репозиторіями GitHub** на наявність нових релізів.
- **Отримання прямих повідомлень** при публікації нових релізів.
- **Додавання або видалення тегів**, пов'язаних з репозиторіями, для публічних сповіщень.
- **Керування спостережуваними репозиторіями** за допомогою різних команд.

Ця функція покращує взаємодію користувачів, надаючи своєчасні оновлення про цікаві їм репозиторії та використовуючи систему тегів Mastodon для охоплення ширшої аудиторії.

## Зміст

- [Можливості](#можливості)
- [Команди](#команди)
  - [Додавання репозиторію до списку спостереження](#1-додавання-репозиторію-до-списку-спостереження)
  - [Видалення репозиторію зі списку спостереження](#2-видалення-репозиторію-зі-списку-спостереження)
  - [Додавання тегів до репозиторію](#3-додавання-тегів-до-репозиторію)
  - [Видалення тегів з репозиторію](#4-видалення-тегів-з-репозиторію)
  - [Отримання інформації про репозиторій](#5-отримання-інформації-про-репозиторій)
  - [Команда допомоги](#6-команда-допомоги)
- [Як це працює](#як-це-працює)
- [Моделі даних](#моделі-даних)
  - [Схема RepoCheck](#1-схема-repocheck)
  - [Схема UserRepoCheck](#2-схема-userrepocheck)
- [Налаштування та Конфігурація](#налаштування-та-конфігурація)
- [Приклади](#приклади)
- [Технічні Примітки](#технічні-примітки)
- [Майбутні Покращення](#майбутні-покращення)

## Можливості

- **Спостереження за репозиторіями GitHub**: Користувачі можуть вказати боту спостерігати за певними репозиторіями GitHub.
- **Прямі сповіщення**: Користувачі отримують прямі повідомлення при появі нових релізів.
- **Публічні оголошення**: Бот публікує статуси з інформацією про релізи та пов'язаними тегами.
- **Керування тегами**: Користувачі можуть додавати або видаляти теги, пов'язані з репозиторіями.
- **Отримання інформації**: Користувачі можуть запитувати інформацію про спостережувані репозиторії.

## Команди

### 1. Додавання репозиторію до списку спостереження

**Команда**: `/github <власник>/<репозиторій> #тег1 #тег2 ...`

**Опис**: Додає репозиторій GitHub до списку спостереження з необов'язковими тегами.

**Приклад**:

```
/github octocat/Hello-World #opensource #updates
```

**Відповідь бота**:

- Надсилає пряме повідомлення користувачу: "Ви почали спостерігати за репозиторієм octocat/Hello-World."

### 2. Видалення репозиторію зі списку спостереження

**Команда**: `/github_remove <власник>/<репозиторій>`

**Опис**: Видаляє репозиторій GitHub зі списку спостереження.

**Приклад**:

```
/github_remove octocat/Hello-World
```

**Відповідь бота**:

- Надсилає пряме повідомлення користувачу: "Ви більше не спостерігаєте за репозиторієм octocat/Hello-World."

### 3. Додавання тегів до репозиторію

**Команда**: `/tags_add <власник>/<репозиторій> #тег1 #тег2 ...`

**Опис**: Додає теги до репозиторію. Теги використовуються в публічних повідомленнях для покращення видимості.

**Приклад**:

```
/tags_add octocat/Hello-World #newrelease #github
```

**Відповідь бота**:

- Публікує статус: "Теги #newrelease #github були додані до octocat/Hello-World."

### 4. Видалення тегів з репозиторію

**Команда**: `/tags_remove <власник>/<репозиторій> #тег1 #тег2 ...`

**Опис**: Видаляє теги з репозиторію.

**Приклад**:

```
/tags_remove octocat/Hello-World #github
```

**Відповідь бота**:

- Публікує статус: "Теги #github були видалені з octocat/Hello-World."

### 5. Отримання інформації про репозиторій

**Команда**: `/info <власник>/<репозиторій>`

**Опис**: Отримує інформацію про спостережуваний репозиторій.

**Приклад**:

```
/info octocat/Hello-World
```

**Відповідь бота**:

- Публікує статус з інформацією про репозиторій, включаючи час останньої перевірки, останній реліз та пов'язані теги.

### 6. Команда допомоги

**Команда**: `/help`

**Опис**: Відображає інформацію про доступні команди.

**Відповідь бота**:

- Публікує статус зі списком доступних команд та їх описом.

## Як це працює

### 1. Взаємодія користувача

Користувачі надсилають команди боту через прямі повідомлення або згадки. Бот обробляє ці команди та виконує відповідні дії.

### 2. Спостереження за репозиторіями

Коли користувач додає репозиторій для спостереження:

- Бот перевіряє, чи існує репозиторій у своїй базі даних (`RepoCheck`).
- Якщо ні, створює новий запис з інформацією про репозиторій.
- Бот асоціює користувача з репозиторієм у схемі `UserRepoCheck`.

### 3. Сповіщення

- **Прямі повідомлення**: Коли виявляється новий реліз, бот надсилає прямі повідомлення всім користувачам, які спостерігають за репозиторієм.
- **Публічні статуси**: Бот публікує публічний статус з інформацією про реліз та пов'язаними тегами.

### 4. Керування тегами

- Теги керуються глобально для кожного репозиторію.
- Користувачі можуть додавати або видаляти теги за допомогою команд `/tags_add` та `/tags_remove`.
- Бот забезпечує максимум 5 тегів на репозиторій.
- Теги включаються в публічні статуси для покращення видимості.

## Моделі даних

### 1. Схема RepoCheck

Представляє репозиторії, за якими бот спостерігає.

```elixir
schema "repo_checks" do
  field :repo, :string
  field :last_checked, :naive_datetime
  field :last_release_tag, :string
  field :tags, {:array, :string}

  timestamps()
end
```

- **repo**: Повна назва репозиторію (наприклад, `octocat/Hello-World`).
- **last_checked**: Час останньої перевірки репозиторію на оновлення.
- **last_release_tag**: Тег останнього виявленого релізу.
- **tags**: Список тегів, пов'язаних з репозиторієм.

### 2. Схема UserRepoCheck

Асоціює користувачів з репозиторіями, за якими вони спостерігають.

```elixir
schema "user_repo_checks" do
  field :user_acct, :string
  field :repo, :string
  field :complains, {:array, :string}
  field :suggestions, {:array, :string}

  timestamps()
end
```

- **user_acct**: Ідентифікатор облікового запису Mastodon користувача (наприклад, `@username`).
- **repo**: Репозиторій, за яким користувач спостерігає.
- **complains**: Зарезервовано для майбутнього використання для відстеження скарг користувачів.
- **suggestions**: Зарезервовано для майбутнього використання для відстеження пропозицій користувачів.

## Налаштування та Конфігурація

### 1. Міграції бази даних

Переконайтеся, що всі міграції виконані для налаштування схем бази даних `RepoCheck` та `UserRepoCheck`. Ви можете згенерувати та виконати міграції за допомогою наступних команд:

```sh
mix ecto.create
mix ecto.migrate
```

Примітка: щоб видалити базу даних, ви можете запустити таку команду:

```sh
mix ecto.drop
```

### 2. Змінні середовища

Переконайтеся, що ваш токен API GitHub налаштований у змінних середовища:

```dotenv
GITHUB_ACCESS_TOKEN=ваш_токен_github
```

## Приклади

### Додавання репозиторію з тегами

**Повідомлення користувача**:

```
/github octocat/Hello-World #opensource #github
```

**Дії бота**:

- Додає `octocat/Hello-World` до `RepoCheck`, якщо він ще не доданий.
- Додає теги `#opensource` та `#github` до репозиторію.
- Асоціює користувача з репозиторієм у `UserRepoCheck`.
- Надсилає пряме повідомлення: "Ви почали спостерігати за репозиторієм octocat/Hello-World."

### Отримання сповіщення

Коли публікується новий реліз для `octocat/Hello-World`:

- Бот оновлює `last_release_tag` у `RepoCheck`.
- Надсилає прямі повідомлення всім користувачам, які спостерігають за репозиторієм.
- Публікує публічний статус:

  ```
  📦 Новий реліз для octocat/Hello-World!

  Версія: v1.2.3
  Назва: Нові можливості

  [Фрагмент нотаток релізу]...

  Ознайомтесь та долучайтесь! 🚀
  https://github.com/octocat/Hello-World

  #opensource #github
  ```

## Технічні Примітки

- **Конкурентність**: Бот використовує `GenServer` та `GenStage` для конкурентної обробки.
- **HTTP Клієнти**: Використовує Tesla для HTTP-запитів до API Mastodon та GitHub.
- **Парсинг**: Використовує `NimbleParsec` для парсингу команд та `Floki` для парсингу HTML.
- **Логування Помилок**: Помилки та виключення логуються для налагодження.

## Майбутні Покращення

- **Скарги та Пропозиції**: Поля `complains` та `suggestions` у `UserRepoCheck` зарезервовані для майбутніх функцій, що дозволять користувачам надавати відгуки.
- **Додаткові Команди**: Можливість додавання нових команд для покращеної взаємодії.
- **Налаштування**: Дозволити користувачам налаштовувати переваги сповіщень.
